ko.bindingHandlers.koTable=new function(){var n=this;n.init=function(n,t,i,r){var e=t(),o=$(n),u=$(n).find("tbody"),c=$.trim(o.attr("id")||o.attr("name")).replace("-","").replace(".","").replace("_",""),b=e.pageSize||-1,l=e.rowsClickable!=null?e.rowsClickable:!1,k=e.showSearch===!0?!0:!1,a=e.allowSort==null?!0:e.allowSort,d=e.initialSortProperty,g=e.initialSortDirection==="asc"?"asc":"desc",s=new KnockoutTable(b,a,d,g,l),f,w;s.setItems([]);r.koTable={};$("table[data-bind*=koTable]").length===1?f=$.extend(r.koTable,s):(r.koTable[c]={},f=$.extend(r.koTable[c],s));r.koTableReady.call();f.onRowsClickableChanged(function(n){u.css("cursor","default");u.off("click");n&&n.data===!0&&u.length&&(u.css("cursor","pointer"),u.click(f.rowClickedCallback))});if(u.css("cursor","default"),u.off("click"),l&&u.css("cursor","pointer"),u.length?u.click(function(n){var t=$(n.target);t.closest("button").length||t.closest("a").length||f.rowClickedCallback(n)}):u.length||$.error("The table has no tbody element so row clicking will not be enabled!"),a){var v='<span class="sort-icon glyphicon glyphicon-triangle-bottom" aria-hidden="true" style="margin-left:5px; color:silver; font-size: 10px;"><\/span>',y='<span class="sort-icon glyphicon glyphicon-triangle-top" aria-hidden="true" style="margin-left:5px; color:silver; font-size: 10px;"><\/span>',h=$("[data-sort-property]");h.css("cursor","pointer");var nt=f.sortDirection(),tt=f.sortProperty(),p=$("[data-sort-property='"+tt+"']");nt==="desc"?p.append(v):p.append(y);h.click(function(){h.find(".sort-icon").remove();var i=f.sortProperty(),n=$(this).attr("data-sort-property"),t="asc";i===n?t=f.toggleSortDirection():f.sortProperty(n);t==="desc"?$(this).append(v):$(this).append(y)})}$.each(o.find(".ko-table-pagination"),function(n,t){$(t).html('<span data-bind="if: !koTable.hasRows()">There are no records to show at the moment :(<\/span><ul class="pagination" data-bind="if: koTable.paginationRequired()" style="padding: 0 !important; margin: 5px 0 5px 0 !important;" ><li data-bind="css: { disabled: koTable.isFirstPage }"><a href="#" data-bind="click: koTable.gotoFirstPage"><span class="glyphicon glyphicon-step-backward" aria-hidden="true"><\/span><\/a><\/li><li data-bind="css: { disabled: koTable.isFirstPage }"><a href="#" data-bind="click: koTable.gotoPreviousPage"><span class="glyphicon glyphicon-backward" aria-hidden="true"><\/span><\/a><\/li><!-- ko foreach: koTable.paginationIndexes() --><li data-bind="css: { active: $data==$parent.koTable.currentPage() }"><a href="#" data-bind="click: $parent.koTable.gotoPage"><span data-bind="text: ($data+1)"><\/span><\/a><\/li><!-- /ko --><li data-bind="css: { disabled: koTable.isLastPage }"><a href="#" data-bind="click: koTable.gotoNextPage"><span class="glyphicon glyphicon-forward" aria-hidden="true"><\/span><\/a><\/li><li data-bind="css: { disabled: koTable.isLastPage }"><a href="#" data-bind="click: koTable.gotoLastPage"><span class="glyphicon glyphicon-fast-forward" aria-hidden="true"><\/span><\/a><\/li><\/ul><div class="text-muted pull-right" style="height:34px; line-height:34px;" data-bind="visable: koTable.rowCount(), text: \'Row Count: \' + koTable.rowCount()"><\/div>').closest("td, th").css({"padding-left":0,"padding-right":0,"text-align":"left"}).attr("colspan",100)});k?$.each(o.find(".ko-table-search"),function(n,t){$(t).addClass("input-group").css({width:"100%"});$(t).html('<span class="glyphicon glyphicon-search input-group-addon input-group-sm" style="top: 0;"><\/span><input type="text" class="form-control" placeholder="search..." value="" />');$(t).find("input[type='text']").on("input",function(n){clearTimeout(w);w=setTimeout(function(){var r=$(n.target),u=r.val(),i=$(t).find("span:first");if(i.removeClass("glyphicon-search").removeClass("glyphicon-remove"),u.length>0)i.addClass("glyphicon-remove").css({cursor:"pointer"}).one("click",function(){i.removeClass("glyphicon-remove").addClass("glyphicon-search").css({cursor:"default"});r.val("").trigger("input")});else i.addClass("glyphicon-search");f.setRowFilter(u)},500)});$(t).closest("td, th").css({"padding-left":0,"padding-right":0}).attr("colspan",100).closest("tr")}):o.find(".ko-table-search").closest("td, th").attr("colspan",100).hide()}};var KnockoutTable=function(){function n(n,t,i,r,u){function b(n,t){var u=ko.unwrap(n),e=ko.unwrap(t),i=ko.unwrap(u[f.sortProperty()]),r=ko.unwrap(e[f.sortProperty()]);return typeof i=="string"&&(i=i.toUpperCase(),r=r.toUpperCase()),f.sortDirection()==="desc"?i<r?1:i>r?-1:0:i<r?-1:i>r?1:0}var f=this,y=5,a={onRowClicked:"onRowClicked",onRowsClickableChanged:"onRowsClickableChanged"},o=ko.observableArray([]),c=ko.observable({allowSort:t,sortProperty:i,sortDirection:$.trim(r||"asc").toLowerCase()}),s=ko.observable(n&&n>0?n:-1),v=ko.observable(u===!0),l=ko.observable(""),h,e,p,w;f.currentPage=ko.observable(0);f.setRowFilter=function(n){var t=ko.unwrap(n);$.trim(t.toString()).length>=2?l(t.toString().toLowerCase()):l("")};h=ko.pureComputed({read:function(){if(l()&&l().length){var n=[];return $.each(o(),function(t,i){var r=ko.mapping.toJS(i),u,f,e;for(u in r)if(r.hasOwnProperty(u)&&(f=(r[u]==null?"":r[u]).toString().toLowerCase(),e=f.indexOf(l())>=0,e)){n.push(i);break}}),n}return o()},write:function(n){o(n)}},f);f.rowClickedCallback=function(n){if(v()){var t=$(n.target).closest("tr"),i=ko.dataFor(t.get(0));w(a.onRowClicked,{clickEvent:n,tr:t,model:i})}};f.rowsClickable=ko.computed({read:function(){return v()},write:function(n){var i=v(),t=n===!0?!0:!1;n===!1||n||(t=t?!1:!0);i!==t&&(w(a.onRowsClickableChanged,t),v(t))}},f);f.pageSize=ko.computed({read:function(){return s()},write:function(n){var t=s(),i=parseInt(n);t!==i&&(n=Math.max(1,n),s(n))}},f);f.sortProperty=ko.computed({read:function(){return c().sortProperty},write:function(n){var r=c().sortProperty,i=$.trim(ko.unwrap(n)),t;r!==i&&(t=c(),t.sortProperty=i,t.sortDirection="asc",c(t))}},f);f.sortDirection=ko.pureComputed({read:function(){return c().sortDirection},write:function(n){var r=c().sortDirection,i=$.trim(ko.unwrap(n)||"asc").toLowerCase(),t;r!==i&&(t=c(),t.sortDirection=i,c(t))}},f);f.toggleSortDirection=function(){var t=f.sortDirection(),n=t==="asc"?"desc":"asc";return f.sortDirection(n),n};f.clearItems=function(){h([]);f.currentPage(-1);f.currentPage(0)};f.pushItem=function(n){o.push(ko.mapping.fromJS(ko.mapping.toJS(n)))};f.allItems=function(){return o()};f.observableItems=function(){return o};f.distinctValues=function(n,t){var i=[];return(t==null||typeof t!="function")&&(t=function(n){return n==null?"":n.toString()}),$.each(o(),function(r,u){var e=ko.unwrap(u),f=ko.unwrap(e[n]);f=t(f);$.inArray(f,i)===-1&&i.push(f)}),i.sort()};f.setItems=function(n){var t;f.clearItems();t=n;typeof n=="function"&&(t=n.apply(null,Array.prototype.slice.call(arguments,1)));t=t||[];t=$.map(t,function(n){var t=ko.mapping.toJS(n);return ko.mapping.fromJS(t)});h(t)};f.findItem=function(n,t){var i=ko.unwrap(t);return $.grep(o(),function(t){var r=ko.unwrap(t),u=ko.unwrap(r[n]);return u===i})};f.removeItem=function(n){var t=$.grep(o(),function(t){return n===t});$.each(t,function(n,t){o.remove(t)})};f.gotoNextPage=function(){f.currentPage()<f.pageCount()-1&&f.currentPage(f.currentPage()+1)};f.gotoPreviousPage=function(){f.currentPage()>0&&f.currentPage(f.currentPage()-1)};f.gotoLastPage=function(){f.currentPage(f.pageCount()-1)};f.gotoFirstPage=function(){f.currentPage(0)};f.gotoPage=function(n){var t=n||0;t!==f.currentPage()&&f.currentPage(t)};f.isFirstPage=ko.pureComputed(function(){return f.currentPage()===0});f.isLastPage=ko.pureComputed(function(){return f.currentPage()===f.pageCount()-1});f.pageCount=ko.pureComputed(function(){return Math.ceil(s()>0?h().length/s()||1:1)});f.paginationIndexes=ko.pureComputed(function(){for(var u=(y-1)/2,t=Math.min(Math.max(f.currentPage()+u,f.currentPage()+y),f.pageCount()),i=Math.max(0,t-y),r=[],n=0;n<t-i;n++)r.push(i+n);return r});f.pagedItems=ko.pureComputed(function(){var n=s()>0?s()*f.currentPage():0,t=s()>0?n+s():f.rowCount();return f.sortProperty()?h().sort(b).slice(n,t):h().slice(n,t)});f.hasRows=ko.pureComputed(function(){return h()&&h().length>0},f);f.paginationRequired=ko.pureComputed(function(){return f.hasRows()&&f.pageCount()>1},f);f.rowCount=ko.pureComputed(function(){return f.hasRows()?h().length:0});e={};f.onRowClicked=function(n){p(a.onRowClicked,n)};f.onRowsClickableChanged=function(n){p(a.onRowsClickableChanged,n)};p=function(n,t){typeof e[n]=="undefined"&&(e[n]=[]);var i=!1;e[n]&&e[n].length>0&&$.each(e[n],function(n,r){return r.name&&r.name.length&&t.name&&t.name.length?(i=r===t,!i):(i=r.toString()===t.toString(),!i)});i||e[n].push(t)};w=function(n,t){var r,i,u;if(typeof n=="string"&&(n={type:n}),n.data=t,n.target||(n.target=f),n.type||$.error("Event object missing 'type' property."),e[n.type]instanceof Array)for(r=e[n.type],i=0,u=r.length;i<u;i++)r[i].call(f,n)};f.removeListener=function(n,t){var r,i,u;if(e[n]instanceof Array)for(r=e[n],i=0,u=r.length;i<u;i++)if(r[i]===t){r.splice(i,1);break}}}return n}();
//# sourceMappingURL=koTable.min.js.map
