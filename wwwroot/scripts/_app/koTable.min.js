ko.bindingHandlers.koTable=new function(){var n=this;n.init=function(n,t,i,r){var o=t(),u=$(n),e=$(n).find("tbody"),y=$.trim(u.attr("id")||u.attr("name")).replace("-","").replace(".","").replace("_",""),p=o.rowsClickable!==null?o.rowsClickable:!1,tt=o.showSearch===!0?!0:!1,f,nt;$(document).ajaxStop(function(){b()});var s,c,h,w,l,it=function(){s=u.find("tr:first th").css("border-bottom-width");c=u.find("tr:first th").css("border-bottom-color");h=u.find("tr:first th").css("border-bottom-style");$.cssHooks.borderColor?(u.find("tr:first th").animate({borderBottomColor:"#FF3300"}),u.find("tr:first th").css({"border-bottom-width":s||"1px","border-bottom-style":h||"solid"}),w=setInterval(function(){l?(u.find("tr:first th").animate({borderBottomColor:c},null,null),l=!1):(u.find("tr:first th").animate({borderBottomColor:"#FF3300"},null,null),l=!0)},500)):u.find("tr:first th").css({"border-bottom-width":s||"1px","border-bottom-color":"#FF3300","border-bottom-style":h||"solid"})},b=function(){$.cssHooks.borderColor?(clearInterval(w),u.find("tr:first th").animate({borderBottomColor:c},null,null,function(){u.find("tr:first th").css({"border-bottom-width":s,"border-bottom-style":h})})):u.find("tr:first th").css({"border-bottom-width":s,"border-bottom-color":c,"border-bottom-style":h})},a=new KnockoutTable(o.pageSize,"id","asc",p,it,b);o.items=o.items||[];a.setItems(o.items);$("table[data-bind*=koTable]").length===1?f=$.extend(r,a):(r[y]={},f=$.extend(r[y],a));f.onInit.call();f.onRowsClickableChanged(function(n){e.css("cursor","default");e.off("click");n&&n.data===!0&&e.length&&(e.css("cursor","pointer"),e.click(f.rowClickedCallback))});e.css("cursor","default");e.off("click");p&&e.css("cursor","pointer");e.length?e.click(function(n){f.rowClickedCallback(n)}):e.length||$.error("The table has no tbody element so row clicking will not be enabled!");var k='<span class="sort-icon glyphicon glyphicon-triangle-bottom" aria-hidden="true" style="margin-right:5px; color:silver; font-size: 10px;"><\/span>',d='<span class="sort-icon glyphicon glyphicon-triangle-top" aria-hidden="true" style="margin-right:5px; color:silver; font-size: 10px;"><\/span>',v=$("[data-sort-property]");v.css("cursor","pointer");var rt=f.sortDirection(),ut=f.sortProperty(),g=$("[data-sort-property='"+ut+"']");if(rt==="desc"?g.prepend(k):g.prepend(d),v.click(function(){v.find(".sort-icon").remove();var i=f.sortProperty(),n=$(this).attr("data-sort-property"),t="asc";i===n?t=f.toggleSortDirection():f.sortProperty(n);t==="desc"?$(this).prepend(k):$(this).prepend(d)}),$.each(u.find(".ko-table-pagination"),function(n,t){$(t).html('<span data-bind="if: !hasRows()">There are no records to show at the moment :(<\/span><ul class="pagination" data-bind="if: paginationRequired()" ><li data-bind="css: { disabled: isFirstPage }"><a href="#" data-bind="click: gotoFirstPage"><span class="glyphicon glyphicon-step-backward" aria-hidden="true"><\/span><\/a><\/li><li data-bind="css: { disabled: isFirstPage }"><a href="#" data-bind="click: gotoPreviousPage"><span class="glyphicon glyphicon-backward" aria-hidden="true"><\/span><\/a><\/li><!-- ko foreach: paginationIndexes() --><li data-bind="css: { active: $data==$parent.currentPage() }"><a href="#" data-bind="click: $parent.gotoPage"><span data-bind="text: ($data+1)"><\/span><\/a><\/li><!-- /ko --><li data-bind="css: { disabled: isLastPage }"><a href="#" data-bind="click: gotoNextPage"><span class="glyphicon glyphicon-forward" aria-hidden="true"><\/span><\/a><\/li><li data-bind="css: { disabled: isLastPage }"><a href="#" data-bind="click: gotoLastPage"><span class="glyphicon glyphicon-fast-forward" aria-hidden="true"><\/span><\/a><\/li><\/ul>').closest("td, th").css({"padding-left":0,"padding-right":0,"text-align":"left"}).attr("colspan",100)}),tt){$.each(u.find(".ko-table-search"),function(n,t){$(t).addClass("input-group").css({width:"100%"}).html('<span class="glyphicon glyphicon-search input-group-addon input-group-sm" style="top: 0;"><\/span><input type="text" class="form-control" placeholder="search..." />').closest("td, th").css({"padding-left":0,"padding-right":0}).attr("colspan",100).closest("tr").attr("data-bind","if: hasRows()")});$(".ko-table-search input").on("input",function(n){clearTimeout(nt);nt=setTimeout(function(){var t=$(n.target).val();f.setRowFilter(t)},250)})}else u.find(".ko-table-search").closest("td, th").attr("colspan",100).hide()}};var KnockoutTable=function(){function n(n,t,i,r,u,f){function k(n,t){var i=n[e.sortProperty()],r=t[e.sortProperty()];return e.sortDirection()==="desc"?i<r?1:i>r?-1:0:i<r?-1:i>r?1:0}var e=this,w=5,h={onWaitStart:"onWaitStart",onWaitEnd:"onWaitEnd",onRowClicked:"onRowClicked",onRowsClickableChanged:"onRowsClickableChanged"},b=ko.observableArray(),c=ko.observable({sortProperty:t,sortDirection:$.trim(i||"asc").toLowerCase()}),l=ko.observable(n&&n>0?n:10),p=ko.observable(r===!0),a=ko.observable(""),s,o,v,y;e.currentPage=ko.observable(0);e.setRowFilter=function(n){$.trim(n.toString()).length>=2?a(n.toString().toLowerCase()):a("")};s=ko.pureComputed({read:function(){if(a()&&a().length){var n=[];return $.each(b(),function(t,i){var r,u,f;for(r in i)if(i.hasOwnProperty(r)&&(u=i[r].toString().toLowerCase(),f=u.indexOf(a())>=0,f)){n.push(i);break}}),n}return b()},write:function(n){b(n)}},e);e.rowClickedCallback=function(n){if(p()){var t=$(n.target).closest("tr"),i=ko.dataFor(t.get(0));y(h.onRowClicked,{tr:t,model:i})}};e.rowsClickable=ko.computed({read:function(){return p()},write:function(n){var i=p(),t=n===!0?!0:!1;n===!1||n||(t=t?!1:!0);i!==t&&(y(h.onRowsClickableChanged,t),p(t))}},e);e.pageSize=ko.computed({read:function(){return l()},write:function(n){var t=l(),i=parseInt(n);t!==i&&(n=Math.max(1,n),l(n))}},e);e.sortProperty=ko.computed({read:function(){return c().sortProperty},write:function(n){var r=c().sortProperty,i=$.trim(n),t;r!==i&&(t=c(),t.sortProperty=i,t.sortDirection="asc",c(t))}},e);e.sortDirection=ko.pureComputed({read:function(){return c().sortDirection},write:function(n){var r=c().sortDirection,i=$.trim(n||"asc").toLowerCase(),t;r!==i&&(t=c(),t.sortDirection=i,c(t))}},e);e.toggleSortDirection=function(){var t=e.sortDirection(),n=t==="asc"?"desc":"asc";return e.sortDirection(n),n};e.clearItems=function(){s([]);e.currentPage(0)};e.setItems=function(n){var t,i;e.clearItems();t=n;typeof n=="function"&&(t=n.apply(null,Array.prototype.slice.call(arguments,1)));t=t||[];ko.mapping&&(i=ko.utils.arrayMap(t,function(n){return ko.mapping.fromJS(n)}),s(i));s(t)};e.gotoNextPage=function(){e.currentPage()<e.pageCount()-1&&e.currentPage(e.currentPage()+1)};e.gotoPreviousPage=function(){e.currentPage()>0&&e.currentPage(e.currentPage()-1)};e.gotoLastPage=function(){e.currentPage(e.pageCount()-1)};e.gotoFirstPage=function(){e.currentPage(0)};e.gotoPage=function(n){var t=n||0;t!==e.currentPage()&&e.currentPage(t)};e.isFirstPage=ko.pureComputed(function(){return e.currentPage()===0});e.isLastPage=ko.pureComputed(function(){return e.currentPage()===e.pageCount()-1});e.pageCount=ko.pureComputed(function(){return Math.ceil(s().length/l()||1)});e.paginationIndexes=ko.pureComputed(function(){for(var u=(w-1)/2,t=Math.min(Math.max(e.currentPage()+u,e.currentPage()+w),e.pageCount()),i=Math.max(0,t-w),r=[],n=0;n<t-i;n++)r.push(i+n);return r});e.pagedItems=ko.pureComputed(function(){var n=l()*e.currentPage(),t=n+l();return s().sort(k).slice(n,t)});e.hasRows=ko.pureComputed(function(){return s()&&s().length>0},e);e.paginationRequired=ko.pureComputed(function(){return e.hasRows()&&e.pageCount()>1},e);e.rowCount=ko.pureComputed(function(){return e.hasRows()?s().length:0});o={};e.onRowClicked=function(n){v(h.onRowClicked,n)};e.onRowsClickableChanged=function(n){v(h.onRowsClickableChanged,n)};e.waitStart=function(){y(h.onWaitStart)};e.waitEnd=function(){y(h.onWaitEnd)};v=function(n,t){typeof o[n]=="undefined"&&(o[n]=[]);var i=!1;o[n]&&o[n].length>0&&$.each(o[n],function(n,r){return r.name&&r.name.length&&t.name&&t.name.length?(i=r===t,!i):(i=r.toString()===t.toString(),!i)});i||o[n].push(t)};y=function(n,t){var r,i,u;if(typeof n=="string"&&(n={type:n}),n.data=t,n.target||(n.target=e),n.type||$.error("Event object missing 'type' property."),o[n.type]instanceof Array)for(r=o[n.type],i=0,u=r.length;i<u;i++)r[i].call(e,n)};e.removeListener=function(n,t){var r,i,u;if(o[n]instanceof Array)for(r=o[n],i=0,u=r.length;i<u;i++)if(r[i]===t){r.splice(i,1);break}};v(h.onWaitStart,u);v(h.onWaitEnd,f)}return n}();
//# sourceMappingURL=koTable.min.js.map
