ko.bindingHandlers.koTable=new function(){var n=this;n.init=function(n,t,i,r){var o=t(),u=$(n),e=$(n).find("tbody"),l=$.trim(u.attr("id")||u.attr("name")).replace("-","").replace(".","").replace("_",""),a=o.rowsClickable!==null?o.rowsClickable:o.rowClickedCallback!==null||!1,s=o.rowClickedCallback,k=o.showSearch===!0?!0:!1,f,b;$(document).ajaxStop(function(){v()});var d=function(){if(!u.prev(".ko-spinner-row").length){var n=$('<div class="ko-spinner-row"><span class="glyphicon glyphicon-refresh fa-spin" style="display: inline-block; -webkit-animation: fa-spin 2s infinite linear; animation: fa-spin 2s infinite linear;"><\/span><\/div>');n.css({"z-index":8347858543,position:"absolute",top:u.position().top,left:u.position().left+"px","font-size":Math.min(26,u.height()/3)+"px","line-height":u.height()+"px",width:u.width()+"px",height:u.height()+"px","background-color":"white",opacity:"0.9"});n.hide();u.before(n);n.show();u.prop("disabled",!0);u.prop("readonly",!0)}},v=function(){u.prev(".ko-spinner-row").remove()},h=new KnockoutTable(o.pageSize,"id","asc",s,a,d,v);o.items=o.items||[];h.setItems(o.items);$("table[data-bind*=koTable]").length===1?f=$.extend(r,h):(r[l]={},f=$.extend(r[l],h));f.onInit.call();f.onRowsClickableChanged(function(n){e.css("cursor","default");e.off("click");n&&n.data===!0&&s&&e.length&&(e.css("cursor","pointer"),e.click(f.rowClickedCallback))});e.css("cursor","default");e.off("click");a&&e.css("cursor","pointer");s&&e.length?e.click(f.rowClickedCallback):e.length||$.error("The table has no tbody element so row clicking will not be enabled!");var y='<span class="sort-icon glyphicon glyphicon-triangle-bottom small" aria-hidden="true" style="margin-right:5px;"><\/span>',p='<span class="sort-icon glyphicon glyphicon-triangle-top small" aria-hidden="true" style="margin-right:5px;"><\/span>',c=$("[data-sort-property]");c.css("cursor","pointer");var g=f.sortDirection(),nt=f.sortProperty(),w=$("[data-sort-property='"+nt+"']");if(g==="desc"?w.prepend(y):w.prepend(p),c.click(function(){c.find(".sort-icon").remove();var i=f.sortProperty(),n=$(this).attr("data-sort-property"),t="asc";i===n?t=f.toggleSortDirection():f.sortProperty(n);t==="desc"?$(this).prepend(y):$(this).prepend(p)}),$.each(u.find(".ko-table-pagination"),function(n,t){$(t).html('<span data-bind="if: !hasRows()">There are no records to show at the moment :(<\/span><ul class="pagination" data-bind="if: paginationRequired()" ><li data-bind="css: { disabled: isFirstPage }"><a href="#" data-bind="click: gotoFirstPage"><span class="glyphicon glyphicon-step-backward" aria-hidden="true"><\/span><\/a><\/li><li data-bind="css: { disabled: isFirstPage }"><a href="#" data-bind="click: gotoPreviousPage"><span class="glyphicon glyphicon-backward" aria-hidden="true"><\/span><\/a><\/li><!-- ko foreach: paginationIndexes() --><li data-bind="css: { active: $data==$parent.currentPage() }"><a href="#" data-bind="click: $parent.gotoPage"><span data-bind="text: ($data+1)"><\/span><\/a><\/li><!-- /ko --><li data-bind="css: { disabled: isLastPage }"><a href="#" data-bind="click: gotoNextPage"><span class="glyphicon glyphicon-forward" aria-hidden="true"><\/span><\/a><\/li><li data-bind="css: { disabled: isLastPage }"><a href="#" data-bind="click: gotoLastPage"><span class="glyphicon glyphicon-fast-forward" aria-hidden="true"><\/span><\/a><\/li><\/ul>').closest("td, th").css({"padding-left":0,"padding-right":0,"text-align":"left"}).attr("colspan",100)}),k){$.each(u.find(".ko-table-search"),function(n,t){$(t).addClass("input-group").css({width:"100%"}).html('<span class="glyphicon glyphicon-search input-group-addon input-group-sm" style="top: 0;"><\/span><input type="text" class="form-control" placeholder="search..." />').closest("td, th").css({"padding-left":0,"padding-right":0}).attr("colspan",100)});$(".ko-table-search input").on("input",function(n){clearTimeout(b);b=setTimeout(function(){var t=$(n.target).val();f.setRowFilter(t)},250)})}else u.find(".ko-table-search").closest("td, th").attr("colspan",100).hide()}};var KnockoutTable=function(){function n(n,t,i,r,u,f,e){function d(n,t){var i=n[o.sortProperty()],r=t[o.sortProperty()];return o.sortDirection()==="desc"?i<r?1:i>r?-1:0:i<r?-1:i>r?1:0}var o=this,b=5,c={onWaitStart:"onWaitStart",onWaitEnd:"onWaitEnd",onRowClicked:"onRowClicked",onRowsClickableChanged:"onRowsClickableChanged"},k=ko.observableArray(),l=ko.observable({sortProperty:t,sortDirection:$.trim(i||"asc").toLowerCase()}),a=ko.observable(n&&n>0?n:10),w=ko.observable(u===!0),v=ko.observable(""),h,s,y,p;o.currentPage=ko.observable(0);o.setRowFilter=function(n){$.trim(n.toString()).length>=2?v(n.toString().toLowerCase()):v("")};h=ko.pureComputed({read:function(){if(v()&&v().length){var n=[];return $.each(k(),function(t,i){var r,u,f;for(r in i)if(i.hasOwnProperty(r)&&(u=i[r].toString().toLowerCase(),f=u.indexOf(v())>=0,f)){n.push(i);break}}),n}return k()},write:function(n){k(n)}},o);o.rowClickedCallback=function(n){if(r&&w()){var t=$(n.target).closest("tr"),i=ko.dataFor(t.get(0));r(t,i);p(c.onRowClicked,{tr:t,model:i})}};o.rowClickedCallbackExists=ko.pureComputed({read:function(){return r!==null}},o);o.rowsClickable=ko.computed({read:function(){return w()},write:function(n){var i=w(),t=n===!0?!0:!1;i!==t&&(p(c.onRowsClickableChanged,t),w(t))}},o);o.pageSize=ko.computed({read:function(){return a()},write:function(n){var t=a(),i=parseInt(n);t!==i&&(n=Math.max(1,n),a(n))}},o);o.sortProperty=ko.computed({read:function(){return l().sortProperty},write:function(n){var r=l().sortProperty,i=$.trim(n),t;r!==i&&(t=l(),t.sortProperty=i,t.sortDirection="asc",l(t))}},o);o.sortDirection=ko.pureComputed({read:function(){return l().sortDirection},write:function(n){var r=l().sortDirection,i=$.trim(n||"asc").toLowerCase(),t;r!==i&&(t=l(),t.sortDirection=i,l(t))}},o);o.toggleSortDirection=function(){var t=o.sortDirection(),n=t==="asc"?"desc":"asc";return o.sortDirection(n),n};o.clearItems=function(){h([]);o.currentPage(0)};o.setItems=function(n){var t,i;o.clearItems();t=n;typeof n=="function"&&(t=n.apply(null,Array.prototype.slice.call(arguments,1)));t=t||[];ko.mapping&&(i=ko.utils.arrayMap(t,function(n){return ko.mapping.fromJS(n)}),h(i));h(t)};o.gotoNextPage=function(){o.currentPage()<o.pageCount()-1&&o.currentPage(o.currentPage()+1)};o.gotoPreviousPage=function(){o.currentPage()>0&&o.currentPage(o.currentPage()-1)};o.gotoLastPage=function(){o.currentPage(o.pageCount()-1)};o.gotoFirstPage=function(){o.currentPage(0)};o.gotoPage=function(n){var t=n||0;t!==o.currentPage()&&o.currentPage(t)};o.isFirstPage=ko.pureComputed(function(){return o.currentPage()===0});o.isLastPage=ko.pureComputed(function(){return o.currentPage()===o.pageCount()-1});o.pageCount=ko.pureComputed(function(){return Math.ceil(h().length/a()||1)});o.paginationIndexes=ko.pureComputed(function(){for(var u=(b-1)/2,t=Math.min(Math.max(o.currentPage()+u,o.currentPage()+b),o.pageCount()),i=Math.max(0,t-b),r=[],n=0;n<t-i;n++)r.push(i+n);return r});o.pagedItems=ko.pureComputed(function(){var n=a()*o.currentPage(),t=n+a();return h().sort(d).slice(n,t)});o.hasRows=ko.pureComputed(function(){return h()&&h().length>0},o);o.paginationRequired=ko.pureComputed(function(){return o.hasRows()&&o.pageCount()>1},o);o.rowCount=ko.pureComputed(function(){return o.hasRows()?h().length:0});s={};o.onRowClicked=function(n){y(c.onRowClicked,n)};o.onRowsClickableChanged=function(n){y(c.onRowsClickableChanged,n)};o.waitStart=function(){p(c.onWaitStart)};o.waitEnd=function(){p(c.onWaitEnd)};y=function(n,t){typeof s[n]=="undefined"&&(s[n]=[]);var i=!1;s[n]&&s[n].length>0&&$.each(s[n],function(n,r){return r.name&&r.name.length&&t.name&&t.name.length?(i=r===t,!i):(i=r.toString()===t.toString(),!i)});i||s[n].push(t)};p=function(n,t){var r,i,u;if(typeof n=="string"&&(n={type:n}),n.data=t,n.target||(n.target=o),n.type||$.error("Event object missing 'type' property."),s[n.type]instanceof Array)for(r=s[n.type],i=0,u=r.length;i<u;i++)r[i].call(o,n)};o.removeListener=function(n,t){var r,i,u;if(s[n]instanceof Array)for(r=s[n],i=0,u=r.length;i<u;i++)if(r[i]===t){r.splice(i,1);break}};y(c.onWaitStart,f);y(c.onWaitEnd,e)}return n}();
//# sourceMappingURL=koTable.min.js.map
