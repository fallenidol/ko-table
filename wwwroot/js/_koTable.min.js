ko.bindingHandlers.koTable={init:function(n,t,i,r){var e=t(),o=$(n),f=$(n).find("tbody"),l=$.trim(o.attr("id")||o.attr("name")).replace("-","").replace(".","").replace("_",""),a=e.rowsClickable!==null?e.rowsClickable:e.rowClickedCallback!==null||!1,s=e.rowClickedCallback,h=new KnockoutTable(e.pageSize,"id","asc",s,a),u,w;e.items=e.items||[];h.setItems(e.items);$("table[data-bind*=koTable]").length===1?u=$.extend(r,h):(r[l]={},u=$.extend(r[l],h));u.addListener("rowsClickableChanged",function(n){f.css("cursor","default");f.off("click");n&&n.data===!0&&s&&f.length&&(f.css("cursor","pointer"),f.click(u.rowClickedCallback))});f.css("cursor","default");f.off("click");a&&f.css("cursor","pointer");s&&f.length?f.click(u.rowClickedCallback):f.length||$.error("The table has no tbody element so row clicking will not be enabled!");var v='<span class="sort-icon glyphicon glyphicon-triangle-bottom small" aria-hidden="true" style="margin-right:5px;"><\/span>',y='<span class="sort-icon glyphicon glyphicon-triangle-top small" aria-hidden="true" style="margin-right:5px;"><\/span>',c=$("[data-sort-property]");c.css("cursor","pointer");var b=u.sortDirection(),k=u.sortProperty(),p=$("[data-sort-property='"+k+"']");b==="desc"?p.prepend(v):p.prepend(y);c.click(function(){c.find(".sort-icon").remove();var i=u.sortProperty(),n=$(this).attr("data-sort-property"),t="asc";i===n?t=u.toggleSortDirection():u.sortProperty(n);t==="desc"?$(this).prepend(v):$(this).prepend(y)});$.each(o.find(".ko_table_pagination"),function(n,t){$(t).html('<span data-bind="if: !hasRows()">There are no records to show at the moment :(<\/span><ul class="pagination" data-bind="if: hasRows" ><li data-bind="css: { disabled: isFirstPage }"><a href="#" data-bind="click: gotoFirstPage"><span class="glyphicon glyphicon-step-backward" aria-hidden="true"><\/span><\/a><\/li><li data-bind="css: { disabled: isFirstPage }"><a href="#" data-bind="click: gotoPreviousPage"><span class="glyphicon glyphicon-backward" aria-hidden="true"><\/span><\/a><\/li><!-- ko foreach: paginationIndexes() --><li data-bind="css: { active: $data==$parent.currentPage() }"><a href="#" data-bind="click: $parent.gotoPage"><span data-bind="text: ($data+1)"><\/span><\/a><\/li><!-- /ko --><li data-bind="css: { disabled: isLastPage }"><a href="#" data-bind="click: gotoNextPage"><span class="glyphicon glyphicon-forward" aria-hidden="true"><\/span><\/a><\/li><li data-bind="css: { disabled: isLastPage }"><a href="#" data-bind="click: gotoLastPage"><span class="glyphicon glyphicon-fast-forward" aria-hidden="true"><\/span><\/a><\/li><\/ul>').closest("td").attr("colspan",100)});$(".ko_table_search").on("input",function(n){clearTimeout(w);w=setTimeout(function(){var t=$(n.target).val();u.setRowFilter(t)},250)});u.onInit.call()},update:function(){}};var KnockoutTable=function(){function n(n,t,i,r,u){function y(n,t){var i=n[f.sortProperty()],r=t[f.sortProperty()];return f.sortDirection()==="desc"?i<r?1:i>r?-1:0:i<r?-1:i>r?1:0}var f=this,a=5,v=ko.observableArray(),s=ko.observable({sortProperty:t,sortDirection:$.trim(i||"asc").toLowerCase()}),h=ko.observable(n&&n>0?n:10),l=ko.observable(u===!0),c=ko.observable(""),o,e;f.currentPage=ko.observable(0);f.setRowFilter=function(n){$.trim(n.toString()).length>=2?c(n.toString().toLowerCase()):c("")};o=ko.pureComputed({read:function(){if(c()&&c().length){var n=[];return $.each(v(),function(t,i){var r,u,f;for(r in i)if(i.hasOwnProperty(r)&&(u=i[r].toString().toLowerCase(),f=u.indexOf(c())>=0,f)){n.push(i);break}}),n}return v()},write:function(n){v(n)}},f);f.rowClickedCallback=function(n){if(r&&l()){var t=$(n.target).closest("tr"),i=ko.dataFor(t.get(0));r(t,i);f.trigger("rowClicked",{tr:t,model:i})}};f.rowClickedCallbackExists=ko.pureComputed({read:function(){return r!==null}},f);f.rowsClickable=ko.computed({read:function(){return l()},write:function(n){var i=l(),t=n===!0?!0:!1;i!==t&&(f.trigger("rowsClickableChanged",t),l(t))}},f);f.pageSize=ko.computed({read:function(){return h()},write:function(n){var t=h(),i=parseInt(n);t!==i&&(n=Math.max(1,n),h(n))}},f);f.sortProperty=ko.computed({read:function(){return s().sortProperty},write:function(n){var r=s().sortProperty,i=$.trim(n),t;r!==i&&(t=s(),t.sortProperty=i,t.sortDirection="asc",s(t))}},f);f.sortDirection=ko.pureComputed({read:function(){return s().sortDirection},write:function(n){var r=s().sortDirection,i=$.trim(n||"asc").toLowerCase(),t;r!==i&&(t=s(),t.sortDirection=i,s(t))}},f);f.toggleSortDirection=function(){var t=f.sortDirection(),n=t==="asc"?"desc":"asc";return f.sortDirection(n),n};f.clearItems=function(){o([]);f.currentPage(0)};f.setItems=function(n){if(n=n||[],ko.mapping){var t=ko.utils.arrayMap(n,function(n){return ko.mapping.fromJS(n)});o(t)}o(n)};f.gotoNextPage=function(){f.currentPage()<f.pageCount()-1&&f.currentPage(f.currentPage()+1)};f.gotoPreviousPage=function(){f.currentPage()>0&&f.currentPage(f.currentPage()-1)};f.gotoLastPage=function(){f.currentPage(f.pageCount()-1)};f.gotoFirstPage=function(){f.currentPage(0)};f.gotoPage=function(n){var t=n||0;t!==f.currentPage()&&f.currentPage(t)};f.isFirstPage=ko.pureComputed(function(){return f.currentPage()===0});f.isLastPage=ko.pureComputed(function(){return f.currentPage()===f.pageCount()-1});f.pageCount=ko.pureComputed(function(){return Math.ceil(o().length/h()||1)});f.paginationIndexes=ko.pureComputed(function(){for(var u=(a-1)/2,t=Math.min(Math.max(f.currentPage()+u,f.currentPage()+a),f.pageCount()),i=Math.max(0,t-a),r=[],n=0;n<t-i;n++)r.push(i+n);return r});f.pagedItems=ko.pureComputed(function(){var n=h()*f.currentPage(),t=n+h();return o().sort(y).slice(n,t)});f.hasRows=ko.pureComputed(function(){return o()&&o().length>0},f);f.rowCount=ko.pureComputed(function(){return f.hasRows()?o().length:0});e={};f.addListener=function(n,t){typeof e[n]=="undefined"&&(e[n]=[]);var i=!1;e[n]&&e[n].length>0&&$.each(e[n],function(n,r){return r.name&&r.name.length&&t.name&&t.name.length?(i=r===t,!i):(i=r.toString()===t.toString(),!i)});i||e[n].push(t)};f.trigger=function(n,t){var r,i,u;if(typeof n=="string"&&(n={type:n}),n.data=t,n.target||(n.target=f),n.type||$.error("Event object missing 'type' property."),e[n.type]instanceof Array)for(r=e[n.type],i=0,u=r.length;i<u;i++)r[i].call(f,n)};f.removeListener=function(n,t){var r,i,u;if(e[n]instanceof Array)for(r=e[n],i=0,u=r.length;i<u;i++)if(r[i]===t){r.splice(i,1);break}}}return n}();
//# sourceMappingURL=_koTable.min.js.map
